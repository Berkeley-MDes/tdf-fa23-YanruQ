# PHYSICAL COMPUTING - WEEK 5 #

**PROJECT NAME:** Loud Rabbit  
**GROUP MEMBERS:** Yoojin Leem, Stephanie He, Yanru Qian  
**OVERVIEW:** Moving cahracters with two different modes. When people approched the object in its "SHY" mode, it runs away from people. When it's in "FRIENDLY" mode  
**CHALLENGES:**  
- Combining 
- 

Following the simple servo motors test from last week, I went deeper into motor movement and how to control the direction of spinning.
⬇️ Sucessfully operating two servo motors at the same time. ⬇️ Even though we ended up deciding not to use servo motors, I learned a lot about motors and how it recieved signal which can be applied to the later exploration in DC motors.

https://github.com/Berkeley-MDes/tdf-fa23-YanruQ/assets/142960866/0122f5f2-24a7-44a6-82d5-45ba94c6a9e3

⬇️ Activating **ultrosonic sensor** for incoporating distances between the subject and the object into this interactive process. ⬇️

https://github.com/Berkeley-MDes/tdf-fa23-YanruQ/assets/142960866/8ed9a14a-f7eb-4122-ad83-18d453223a3c


⬇️ Activating **ultrosonic sensor** for incoporating distances between the subject and the object into this interactive process. ⬇️
```Ruby
int setting;
#include "Adafruit_PWMServoDriver.h"
#include "Adafruit-MotorShield-V2.h"
#define TRIG D2
#define ECHO D4
Adafruit_MotorShield AFMS = Adafruit_MotorShield();
Adafruit_DCMotor *myMotor = AFMS.getMotor(1);
Adafruit_DCMotor *myMotor2 = AFMS.getMotor(4);
void setup() {
    pinMode(D7, OUTPUT);
    Particle.subscribe("toggle-led", friendly);  // Change MY_DEVICES as needed
    Particle.subscribe("other-led", shy);  // Change MY_DEVICES as needed
    //og code
    Serial.begin(9600);
    pinMode(TRIG, OUTPUT);
    pinMode(ECHO, INPUT);
    AFMS.begin();
    myMotor->setSpeed(255);
    myMotor2->setSpeed(255);
    myMotor->run(FORWARD);
    myMotor2->run(FORWARD);
}
void loop() {
    Particle.publish("hi", "i am alive!", PRIVATE);
    if(setting == 0) {
        //friendly code
        Particle.publish("hi", "friendly", PRIVATE);
        long duration, distance;
        digitalWrite(TRIG, LOW);
        delayMicroseconds(2);
        digitalWrite(TRIG, HIGH);
        delayMicroseconds(10);
        digitalWrite(TRIG, LOW);
        duration = pulseIn(ECHO, HIGH);
        distance = (duration / 2) * 0.0344;
        // Print the distance to the Serial Monitor
        Serial.print("Distance: ");
        Serial.print(distance);
        Serial.println(" CM");
        // Stop motors if the distance is less than 10cm
        if (distance < 10) {
            myMotor->run(RELEASE);
            myMotor2->run(RELEASE);
        } else {
            myMotor->run(FORWARD);
            myMotor2->run(FORWARD);
        }
        delay(500);
        }
    else if (setting == 1) {
        //shy code
        Particle.publish("hi", "shy", PRIVATE);
        long duration, distance;
        digitalWrite(TRIG, LOW);
        delayMicroseconds(2);
        digitalWrite(TRIG, HIGH);
        delayMicroseconds(10);
        digitalWrite(TRIG, LOW);
        duration = pulseIn(ECHO, HIGH);
        distance = (duration / 2) * 0.0344;
        // Print the distance to the Serial Monitor
        Serial.print("Distance: ");
        Serial.print(distance);
        Serial.println(" CM");
        // Stop motors if the distance is less than 10cm
        if (distance < 10) {
            myMotor->run(RELEASE);
            myMotor2->run(RELEASE);
        } else {
            myMotor->run(BACKWARD);
            myMotor2->run(BACKWARD);
        }
        delay(500);
        }
    // Additional continuous code (if needed) can be placed here.
}
void toggleLed(const char *event, const char *data) {
    // Debug: publish an event to indicate that “toggle-led” has been received.
    Particle.publish("debug", "Toggle LED event received!", PRIVATE);
    // Toggle LED
    digitalWrite(D7, HIGH);
    delay(500);  // increased delay for better visibility
    digitalWrite(D7, LOW);
    delay(500);
}
void friendly(const char *event, const char *data){
    setting = 0;
}
void shy(const char *event, const char *data){
    setting = 1;
}
```
